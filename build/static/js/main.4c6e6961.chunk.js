(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,n){e.exports=n(74)},49:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(28),a=n(7),o=(n(49),n(8)),s={tuid:{salestask:{content:function(e){var t=e.desciption,n=e.customer,i=e.type,a=e.sourceid;return r.createElement(r.Fragment,null,Object(o.v)(t),Object(o.v)(n),Object(o.v)(i),Object(o.v)(a))}}}},c=n(13),l=n.n(c),u=n(12),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onScrollBottom=function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){return[2]})})},t.onSalesTaskClick=function(e){return a.a(t,void 0,void 0,function(){var t;return a.d(this,function(n){return t={id:e.id,type:e.type,biz:e.biz,description:null,remindDate:null,deadline:null,customer:e.customer},this.controller.showTaskDetailEdit(t),[2]})})},t.onSalesTaskAdd=function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.controller.selectTaskType()];case 1:return e.sent(),[2]}})})},t.renderSalesTask=function(e,n){e.description;var i=e.deadline,a=e.biz,s=e.customer,c=e.type,u=e.typeName,d=e.priorty,m=l()({"my-1 mr-3":!0,"text-danger":d>0,"text-info":!(d>0)}),p=r.createElement("div",{className:m},t.controller.taskIcon(u)),h=r.createElement("div",{className:"text-right"},i&&r.createElement("small",{className:"text-muted"},"\u65f6\u9650\uff1a",r.createElement(o.c,{date:i})));return r.createElement(o.g,{className:"px-3 py-2",left:p},r.createElement(o.g,{className:"",right:h},r.createElement("div",{className:"font-weight-bold"},Object(o.v)(s,function(e){return r.createElement(r.Fragment,null,e.name)}))),r.createElement(o.g,{className:"",right:r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(o.v)(c,function(e){return r.createElement(r.Fragment,null,e.description)})))},r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(o.v)(a,function(e){return r.createElement(r.Fragment,null,e.description)})))))},t.page=Object(u.a)(function(){var e=t.controller.tasks;if(void 0===e)return null;var n=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u4efb\u52a1"),i=r.createElement("div",{onClick:t.onSalesTaskAdd,className:"cursor-pointer px-3"},r.createElement(o.d,{name:"plus"})),a={render:t.renderSalesTask,onClick:t.onSalesTaskClick},s=e.tasksNow,c=e.dateTasksList;return r.createElement(o.j,{header:"\u9500\u552e\u52a9\u624b",onScrollBottom:t.onScrollBottom,right:i,headerClassName:"bg-primary py-1"},s.length>0&&r.createElement(o.h,{before:"",none:n,items:s,item:a}),c.map(function(e,t){var i=e.date,s=e.list;return 0===s.length?null:r.createElement(r.Fragment,{key:t},r.createElement("div",{className:"small text-muted pt-3 px-3 pb-2 text-center"},r.createElement(o.c,{date:i})),r.createElement(o.h,{before:"",none:n,items:s,item:a}))}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(e){return[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(o.p),m=n(11),p=[{name:"resulttype",type:"string",required:!1},{name:"date",type:"string",required:!0},{name:"result",type:"string",required:!1}],h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dateVisible=!1,t.list=[{value:1,title:"\u660e\u5929"},{value:2,title:"\u540e\u5929"}],t.onChange=function(e){var n=e.currentTarget.value;t.dateVisible="0"===n;var r=new Date;"1"===n?(r.setDate(r.getDate()+1),t.setValue(new Date(e.currentTarget.value))):"2"===n&&(r.setDate(r.getDate()+2),t.setValue(new Date(e.currentTarget.value)))},t.onDateChange=function(e){t.setValue(e.currentTarget.value)},t.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},t.list.map(function(e,n){return r.createElement("label",{className:"my-1"},r.createElement("input",{type:"radio",value:e.value,name:"a",onChange:t.onChange})," ",e.title," \xa0 ")}),r.createElement("div",null,r.createElement("label",{className:"my-1"},r.createElement("input",{type:"radio",value:0,name:"a",onChange:t.onChange})," \u65e5\u671f \xa0 "),t.dateVisible&&r.createElement("input",{type:"date",defaultValue:(new Date).toDateString(),onChange:t.onDateChange})))},t}return a.c(t,e),a.b([m.l],t.prototype,"dateVisible",void 0),t}(o.r),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{resulttype:{visible:!1},date:{widget:"custom",label:"\u63d0\u9192\u65e5\u671f",WidgetClass:h},result:{widget:"textarea",label:"\u5907\u6ce8",placeholder:"\u8bf7\u8f93\u5165\u5904\u7406\u7ed3\u679c\uff01",rows:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.onExtensionTask=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return a.a(t,void 0,void 0,function(){var e,t,r,i;return a.d(this,function(a){switch(a.label){case 0:return e=n.form.data,t=e.result,r=e.resulttype,i=e.date,[4,this.controller.extensionTask(this.task,t,r,i)];case 1:return a.sent(),this.closePage(2),[2]}})})},t.page=Object(u.a)(function(e){var n=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onExtensionTask},"\u63a8\u8fdf");return r.createElement(o.j,{header:"\u63a8\u8fdf",footer:n,headerClassName:"bg-primary"},r.createElement("div",{className:"App-container container text-left"},r.createElement(o.e,{ref:function(e){return t.form=e},className:"my-3",schema:p,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick})))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t}(o.p),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderHistory=function(e,t){var n=e.date,i=e.status,a=e.principal,s=e.result,c=r.createElement("small",{className:"text-muted"},a.id!==o.s.user.id&&r.createElement("span",{className:"text-muted small"}),Object(o.v)(i,function(e){return e.name})," ");return r.createElement("div",{className:"d-block p-3"},r.createElement(o.g,{left:r.createElement("small",{className:"text-muted"},r.createElement(o.c,{date:n})," "),right:r.createElement("small",{className:"text-muted"},c)}),r.createElement("div",null,s))},t.page=Object(u.a)(function(e){var n=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u672a\u5904\u7406\u3011");return r.createElement(o.j,{header:"\u5904\u7406\u8be6\u60c5"},r.createElement(o.h,{before:"",none:n,items:e.tasks,item:{render:t.renderHistory}}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t}(o.p),y=l()("w-100 py-3","cursor-pointer"),b=r.createElement("div",{className:"w-2c text-right"},r.createElement("i",{className:"fa fa-chevron-right"})),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(e){var t=this,n=this.controller.cSalesTask,i=n.showCustomerDetail,s=n.showTaskHistory,c=(e.type,e.customer),l=e.description,u=e.deadline,d=e.id,m=[{type:"component",name:"customer",component:r.createElement(o.g,{className:y,onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,i(c.id)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",{className:"mr-2"}," ",r.createElement(o.d,{name:"user",className:"text-info mr-2 pt-1"})," "),right:b},Object(o.v)(c,function(e){return r.createElement(r.Fragment,null,e.name)}))}];return u&&m.push({type:"component",name:"deadline",component:r.createElement(o.g,{className:"w-100 py-3",left:r.createElement("div",{className:"mr-2"}," ",r.createElement(o.d,{name:"clock-o",className:"text-info mr-2 pt-1 "})," ")},r.createElement(o.c,{date:u}))}),m.push({type:"component",name:"customer",component:r.createElement(o.g,{className:y,onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,s(d)];case 1:return[2,e.sent()]}})})},left:r.createElement("span",null,r.createElement(o.d,{className:"text-warning",name:"hand-o-right"})," \xa0 \u8be6\u60c5"),right:b})}),l&&m.push({type:"component",name:"description",component:r.createElement("div",{className:"w-100 py-3"},l)}),r.createElement(o.l,{className:"my-2",rows:m,values:e})},t}(o.q),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(e){var t=this,n=this.controller.cSalesTask.showCustomerDetail,i=e.customer,s=[{type:"component",name:"customer",component:r.createElement(o.g,{className:"cursor-pointer my-2 w-100",onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,n(i.id)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",{className:"mr-2"}," ",r.createElement(o.d,{name:"user",className:"text-info mr-2 pt-1 "})," "),right:r.createElement("div",{className:"w-2c text-right"},r.createElement("i",{className:"fa fa-chevron-right"}))},Object(o.v)(i,function(e){return r.createElement(r.Fragment,null,e.name)}))}];return r.createElement(o.l,{className:"my-2",rows:s,values:e})},t}(o.q),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(e){var t=this,n=this.controller.cSalesTask,i=n.showTaskComplet,o=n.showTaskExtension,s=n.showTaskInvalid,c={id:e.id,type:e.type,biz:e.biz,description:null,remindDate:null,deadline:null,customer:e.customer};return r.createElement("div",{className:"d-flex px-1"},r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-start"},r.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,i(c)];case 1:return[2,e.sent()]}})})}},"\xa0\u5904\u7406\xa0")),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,o(c)];case 1:return[2,e.sent()]}})})}},"\u63a8\u8fdf"),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,s(c)];case 1:return[2,e.sent()]}})})}},"\u53d6\u6d88"))},t}(o.q),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(e){var t=this.controller.cSalesTask.getCTaskType(e.biz.obj.name).taskCommonType.completuiSchema,n=e.fields;return void 0===n?r.createElement(r.Fragment,null):r.createElement("div",{className:"w-100"},n.map(function(e,n){var i=e.fieldName,a=e.value,s=t.items[i],c=s.label,l=s.list,u=r.createElement("div",{className:""},r.createElement(o.d,{name:"caret-right",className:"small text-info",fixWidth:!0}),c||i),d=l.find(function(e){return e.value===a});return r.createElement("div",{className:"row bg-white py-2",key:n},r.createElement("div",{className:"col-4 align-self-center"},u),r.createElement("div",{className:"col-8"},d?d.title:a," "))}))},t}(o.q),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(u.a)(function(e){return t.render(e)}),t.onCompletionTask=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return a.a(t,void 0,void 0,function(){var e,t,r,i;return a.d(this,function(a){switch(a.label){case 0:return e=n.form.data,e.result,e.resulttype,t=this.controller.taskCommonType,r=t.completSchema,t.completuiSchema,i=r.map(function(e,t){var r=e.name;return{fieldName:r,value:n.form.data[r]}}),[4,this.controller.cSalesTask.completionTask(this.salestask,i)];case 1:return a.sent(),this.closePage(2),[2]}})})},t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this;this.salestask=e;var n=this.controller.taskCommonType,i=n.completSchema,a=n.completuiSchema;return r.createElement("div",null,r.createElement(o.e,{ref:function(e){return t.form=e},className:"my-3",schema:i,uiSchema:a,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onCompletionTask},"\u5b8c\u7ed3"))},t}(o.p),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="plus",t.renderComplet=function(e){var n=t.caption;return r.createElement(o.j,{header:n,headerClassName:"bg-primary"},t.renderCompletContent(e))},t.renderCompletContent=function(e){return t.renderView(C,e)},t.renderDetailEdit=function(e){var n=t,i=n.caption,a=n.renderDetailTop,s=n.renderActionsBottom,c=n.renderDetailContent;return r.createElement(o.j,{header:i,footer:s(e),headerClassName:"bg-primary"},a(e),c(e))},t.renderDetailValues=function(e){var n=t,i=n.caption,a=n.renderDetailTop,s=n.renderDetailContent;return r.createElement(o.j,{header:i,headerClassName:"bg-primary"},a(e),s(e))},t.renderDetailTop=function(e){return t.renderView(g,e)},t.renderDetailContent=function(e){return t.renderView(w,e)},t.renderActionsBottom=function(e){return t.renderView(E,e)},t.renderCreateTop=function(e){return t.renderView(k,e)},t}return a.c(t,e),t.prototype.showDetailFromId=function(e){return a.a(this,void 0,Promise,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.cSalesTask.loadTask(e)];case 1:return t=n.sent(),this.openPage(this.renderDetailValues(t)),[2]}})})},t.prototype.showDetailEdit=function(e){return a.a(this,void 0,Promise,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.cSalesTask.loadTask(e.id)];case 1:return t=n.sent(),this.openPage(this.renderDetailEdit(t)),[2]}})})},t.prototype.showComplet=function(e){return a.a(this,void 0,Promise,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.cSalesTask.loadTask(e.id)];case 1:return t=n.sent(),this.openPage(this.renderComplet(t)),[2]}})})},t.prototype.showCreate=function(e){return a.a(this,void 0,Promise,function(){return a.d(this,function(t){return this.openPage(r.createElement(o.j,{header:e.biz.name},"\u6ca1\u6709\u7ee7\u627fshowCreate\uff01")),[2]})})},t}(o.b),N=[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.onAddSalesTask=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.controller.cSalesTask.createTask(n.form.data,this.salestask)];case 1:return e.sent(),this.closePage(1),[2]}})})},t.page=Object(u.a)(function(e){return t.render(e)}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.salestask=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this,n=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onAddSalesTask},"\u4fdd\u5b58");return r.createElement(o.j,{header:this.controller.caption,footer:n,headerClassName:"bg-primary"},r.createElement("div",{className:"App-container container text-left"},this.controller.renderCreateTop(e),r.createElement(o.e,{ref:function(e){return t.form=e},className:"my-3",schema:N,uiSchema:this.uiSchema,onButtonClick:this.onFormButtonClick,requiredFlag:!1})))},t}(o.p),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.internalStart=function(e){},t.prototype.showCreate=function(e){return a.a(this,void 0,Promise,function(){return a.d(this,function(t){return this.openVPage(S,e),[2]})})},t}(T),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAddSalesTask=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.controller.cSalesTask.createTask(n.form.data,this.salestask)];case 1:return e.sent(),this.closePage(3),[2]}})})},t.page=Object(u.a)(function(e){return t.render(e)}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.salestask=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this,n=this.controller.taskCommonType,i=n.schema,a=n.uiSchema,s=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onAddSalesTask},"\u4fdd\u5b58");return r.createElement(o.j,{header:this.controller.caption,footer:s},r.createElement("div",{className:"App-container container text-left"},this.controller.renderCreateTop(e),r.createElement(o.e,{ref:function(e){return t.form=e},className:"my-3",schema:i,uiSchema:a,onButtonClick:this.onFormButtonClick,requiredFlag:!1})))},t}(o.p),j=function(e){function t(t,n){var r=e.call(this,n)||this;return r.taskCommonType=t,r.icon=t.icon,r.caption=t.caption,r}return a.c(t,e),t.prototype.internalStart=function(e){},t.prototype.showCreate=function(e){return a.a(this,void 0,Promise,function(){return a.d(this,function(t){return this.openVPage(P,e),[2]})})},t}(T),q={caption:"Common1",icon:r.createElement(o.d,{name:"flask",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],completuiSchema:{items:{description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}],radioClassName:"w-min-6c d-inline-block"},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},z={caption:"Common2",icon:r.createElement(o.d,{name:"plus",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],completuiSchema:{items:{description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},B={caption:"\u5927\u5305\u88c5\u62a5\u4ef7\u8ddf\u8e2a",icon:r.createElement(o.d,{name:"flask",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}],radioClassName:"w-min-6c d-inline-block"},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"description",type:"number",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"number",required:!1}],completuiSchema:{items:{description:{widget:"radio",label:"\u7814\u7a76\u9886\u57df",placeholder:"\u7814\u7a76\u9886\u57df",defaultValue:1,list:Object(o.u)(["1:\u6709\u673a\u5316\u5b66","2:\u751f\u7269","3:\u7532\u9187","4:\u65e0\u673a"]),radioClassName:"w-min-6c d-inline-block"},priorty:{widget:"radio",label:"\u72b6\u6001",defaultValue:1,list:[{value:1,title:"\u6709\u6548"},{value:0,title:"\u65e0\u6548"}]},deadline:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",placeholder:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{title:"\u5927\u5ba2\u6237",value:1},{title:"\u5927\u5ba2\u62372",value:2},{title:"\u5927\u5ba2\u62373",value:3},{title:"\u5927\u5ba2\u62374",value:4},{title:"\u5927\u5ba2\u62375",value:5}],radioClassName:"w-min-6c d-inline-block"},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},O={typeA:x,reagent:{caption:"\u8bd5\u5242\u62a5\u4ef7\u8ddf\u8e2a",icon:r.createElement(o.d,{name:"flask",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],completuiSchema:{items:{description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},nonreagent:B,common1:q,common2:z};var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderList=function(e,n){var i=e.description,a=e.name,s=r.createElement("div",{className:"text-info mr-3"},t.controller.cSalesTask.taskIcon(a));return r.createElement(o.g,{className:"px-3 py-2",left:s},r.createElement("div",{className:"font-weight-bold"},i))},t.onClickTaskType=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.controller.selectTaskType(e)];case 1:return t.sent(),[2]}})})},t.ai=function(){return r.createElement(o.g,{className:"p-3 bg-white mb-1 cursor-pointer",left:r.createElement(o.d,{className:"text-success mr-3 mt-1",name:"android",size:"lg",fixWidth:!0}),onClick:t.controller.aiClick},r.createElement("div",{className:"font-weight-bold"},"\u5e2e\u6211\u627e\u627e\u673a\u4f1a"))},t.page=function(e){var n=t.controller.tasktypelist,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u62b1\u6b49\uff0c\u672a\u627e\u5230\u76f8\u5173\u4ea7\u54c1\uff0c\u8bf7\u91cd\u65b0\u641c\u7d22\uff01");return r.createElement(o.j,{header:"\u65b0\u5efa\u4efb\u52a1",headerClassName:"bg-primary"},t.ai(),r.createElement(o.h,{before:"",none:i,items:n,item:{render:t.renderList,onClick:t.onClickTaskType}}))},t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t}(o.p),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(u.a)(function(){return r.createElement(o.j,{header:"AI"},r.createElement("div",{className:"p-3"},!1===t.finished?r.createElement(r.Fragment,null,r.createElement("i",{className:"fa fa-spinner fa-spin fa-3x fa-fw"}),r.createElement("span",{className:"sr-only"},"Loading..."),"\u597d\u963f\uff0c\u6211\u6765\u7b97\u7b97\uff0c\u7a0d\u7b49......"):r.createElement(r.Fragment,null,r.createElement("i",{className:"fa fa-frown-o fa-2x fa-fw text-warning"})," \u6ca1\u6709\u627e\u5230\u9002\u5408\u4f60\u7684\u673a\u4f1a\uff01")))}),t}return a.c(t,e),t.prototype.open=function(){return a.a(this,void 0,void 0,function(){var e=this;return a.d(this,function(t){return this.finished=!1,this.openPage(this.page),setTimeout(function(){e.finished=!0},3e3),[2]})})},a.b([m.l],t.prototype,"finished",void 0),t}(o.p),V=function(e){function t(t,n){var r=e.call(this,n)||this;r.selectTaskType=function(e){return a.a(r,void 0,void 0,function(){return a.d(this,function(t){return this.task={id:null,type:e,biz:null,description:null,remindDate:null,deadline:null,customer:null},this.cSalesTask.cSalesTaskBiz.start(this.task),[2]})})},r.returnTaskType=function(e){return a.a(r,void 0,Promise,function(){return a.d(this,function(t){return this.returnCall(e),[2]})})},r.aiClick=function(){r.openVPage(D)},r.cSalesTask=t;var i=r.cSalesTask.cApp.cUqSalesTask;return r.tuidTaskType=i.tuid("tasktype"),r}return a.c(t,e),t.prototype.internalStart=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return this.customerid=e,[4,this.searchByKey("")];case 1:return t.sent(),this.openVPage(A,e),[2]}})})},t.prototype.searchByKey=function(e){return a.a(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return t=this,[4,this.tuidTaskType.search(e,0,100)];case 1:return t.tasktypelist=n.sent(),[2]}})})},a.b([m.l],t.prototype,"tasktypelist",void 0),t}(o.b),I=n(16),F=n.n(I),H=function(){function e(e){this.tasksNow=m.l.array([],{deep:!0}),this.dateTasksList=m.l.array([],{deep:!0});for(var t=0,n=e;t<n.length;t++){var r=n[t];this.add(r)}}return e.prototype.postPone=function(e,t){this.remove(t);var n=F.a.clone(t);n.remindDate=e,this.add(n)},e.prototype.add=function(e){var t=e.remindDate;if(t){var n=this.dateTasksList.find(function(e){return e.date===t});void 0===n?(n={date:t,list:[e]},this.dateTasksList.push(n)):n.list.push(e)}else this.tasksNow.push(e)},e.prototype.remove=function(e){var t=this.tasksNow.findIndex(function(t){return t.id===e.id});if(t>=0)this.tasksNow.splice(t,1);else for(var n=this.dateTasksList.length,r=0;r<n;r++){var i=this.dateTasksList[r].list;if((t=i.findIndex(function(t){return t.id===e.id}))>=0)return i.splice(t,1),void(0===i.length&&this.dateTasksList.splice(r,1))}},a.b([m.l],e.prototype,"tasksNow",void 0),a.b([m.l],e.prototype,"dateTasksList",void 0),e}(),L=[{name:"resulttype",type:"id",required:!1},{name:"result",type:"string",required:!1}],U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{resulttype:{visible:!1},result:{widget:"textarea",label:"\u7ed3\u679c",placeholder:"\u8bf7\u8f93\u5165\u5904\u7406\u7ed3\u679c\uff01",rows:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.onInvalidTask=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return a.a(t,void 0,void 0,function(){var e,t,r;return a.d(this,function(i){switch(i.label){case 0:return e=n.form.data,t=e.result,r=e.resulttype,[4,this.controller.onInvalidTask(this.task,t,r)];case 1:return i.sent(),this.closePage(2),[2]}})})},t.page=Object(u.a)(function(e){var n=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onInvalidTask},"\u53d6\u6d88");return r.createElement(o.j,{header:"\u53d6\u6d88",footer:n,headerClassName:"bg-primary"},r.createElement("div",{className:"App-container container text-left"},r.createElement(o.e,{ref:function(e){return t.form=e},className:"my-3",schema:L,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick})))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t}(o.p),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderHistory=function(e,t){var n=e.task,i=e.date,a=e.status;e.biz,e.result;return r.createElement("div",{className:"d-block p-3"},r.createElement(o.g,null,r.createElement("div",null,r.createElement("small",{className:"text-muted"},r.createElement(o.c,{date:i})," ")),r.createElement(o.g,{right:r.createElement("small",null,"  ",Object(o.v)(a,function(e){return e.name})),left:r.createElement("div",null,r.createElement("span",null,r.createElement(o.d,{name:"user",className:"mr-3 text-info"})),Object(o.v)(n,function(e){return Object(o.v)(e.customer,function(e){return e.name})}))}),r.createElement(o.g,{right:r.createElement("small",null,Object(o.v)(n,function(e){return Object(o.v)(e.type,function(e){return e.description||"#"})})),left:r.createElement("small",null,Object(o.v)(n,function(e){return Object(o.v)(e.biz,function(e){return e.description||"#"})}))})))},t.onTaskClick=function(e){return a.a(t,void 0,void 0,function(){var t,n;return a.d(this,function(r){return t=e.task.obj,n={id:t.id,type:t.type,biz:t.biz,description:null,remindDate:null,deadline:null,customer:t.customer},this.controller.showDetailFromId(n),[2]})})},t.page=Object(u.a)(function(e){var n=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u65e0\u8bb0\u5f55\u3011");return r.createElement(o.j,{header:"\u5df2\u5b8c\u6210\u4efb\u52a1"},r.createElement(o.h,{before:"",none:n,items:e.tasks,item:{render:t.renderHistory,onClick:t.onTaskClick}}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t}(o.p),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderHistory=function(e,t){var n=e.task,i=e.date,a=e.status;e.principal,e.result;return r.createElement("div",{className:"d-block p-3"},r.createElement(o.g,{className:"small",left:r.createElement("small",{className:"text-muted"},r.createElement(o.c,{date:i})),right:r.createElement("small",null,Object(o.v)(a,function(e){return e.name}))}),r.createElement(o.g,{left:r.createElement("small",null,Object(o.v)(n,function(e){return Object(o.v)(e.biz,function(e){return e.description})})),right:r.createElement("small",null,Object(o.v)(n,function(e){return Object(o.v)(e.type,function(e){return e.description})}))}))},t.onSalesTaskClick=function(e){return a.a(t,void 0,void 0,function(){var t,n;return a.d(this,function(r){return t=e.task.obj,n={id:t.id,type:t.type,biz:t.biz,description:null,remindDate:null,deadline:null,customer:t.customer},this.controller.showTaskDetailEdit(n),[2]})})},t.page=Object(u.a)(function(e){var n=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u65e0\u8bb0\u5f55\u3011");return r.createElement(o.j,{header:"\u4ea4\u6d41\u8bb0\u5f55"},r.createElement(o.h,{before:"",none:n,items:e.tasks,item:{render:t.renderHistory,onClick:t.onSalesTaskClick}}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t}(o.p),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItem=function(e,n){var i=e.biz,a=e.type,s=r.createElement("div",{className:"text-info mr-3"},Object(o.v)(a,function(e){return t.controller.cSalesTask.taskIcon(e.name)}));return r.createElement(o.g,{className:"px-3 py-2",left:s},r.createElement("div",{className:"font-weight-bold"},Object(o.v)(i,function(e){return e.description})))},t.onClickTaskBiz=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.controller.selectTaskBiz(e)];case 1:return t.sent(),[2]}})})},t.ai=function(){return null},t.page=function(){var e=t.controller,n=e.taskType,i=e.taskBizs;return r.createElement(o.j,{header:n.description||n.name,headerClassName:"bg-primary"},t.ai(),r.createElement(o.h,{items:i.ret,item:{render:t.renderItem,onClick:t.onClickTaskBiz}}))},t}return a.c(t,e),t.prototype.open=function(){return a.a(this,void 0,void 0,function(){return a.d(this,function(e){return this.openPage(this.page),[2]})})},t}(o.p),M=function(e){function t(t,n){var r=e.call(this,n)||this;r.selectTaskBiz=function(e){return a.a(r,void 0,void 0,function(){return a.d(this,function(t){return this.task.biz=e.biz.obj,this.cSalesTask.cApp.cCustomer.start(this.task),[2]})})},r.returnTaskBiz=function(e){return a.a(r,void 0,Promise,function(){return a.d(this,function(t){return this.returnCall(e),[2]})})},r.aiClick=function(){r.openVPage(D)},r.cSalesTask=t;var i=r.cSalesTask.cApp.cUqSalesTask;return r.mapTaskBiz=i.map("taskbiz"),r}return a.c(t,e),t.prototype.internalStart=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return this.task=e,this.taskType=e.type,[4,this.getBizFromTaskTypeId(this.taskType)];case 1:return t.sent(),this.openVPage(Q),[2]}})})},t.prototype.getBizFromTaskTypeId=function(e){return a.a(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return t=this,[4,this.mapTaskBiz.query({type:e.id})];case 1:return t.taskBizs=n.sent(),[2]}})})},t}(o.b),J=(function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchsalestskQuery=t,n}a.c(t,e),t.prototype.load=function(e,t,n){return a.a(this,void 0,Promise,function(){return a.d(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchsalestskQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id}}(o.k),function(e){function t(t,n){var i=e.call(this,n)||this;i.taskTypes={},i.searchByKey=function(e){return a.a(i,void 0,void 0,function(){var e;return a.d(this,function(t){switch(t.label){case 0:return[4,this.qeurySearchTask.table({})];case 1:return e=t.sent(),this.tasks=new H(e),[2]}})})},i.loadTask=function(e){return a.a(i,void 0,void 0,function(){var t,n;return a.d(this,function(r){switch(r.label){case 0:return[4,this.taskTuid.load(e)];case 1:return t=r.sent(),n=t,[4,this.searchTaskCompletion(e)];case 2:return n.fields=r.sent(),[2,t]}})})},i.searchTaskCompletion=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.qeurySearchTaskCompletion.table({taskid:e})];case 1:return[2,t.sent()]}})})},i.showTaskHistory=function(e){return a.a(i,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.qeurySearchHistory.table({taskid:e})];case 1:return t=n.sent(),this.openVPage(v,{tasks:t}),[2]}})})},i.showEmployeeHistory=function(){return a.a(i,void 0,void 0,function(){var e;return a.d(this,function(t){switch(t.label){case 0:return[4,this.qeurySearchEmployeeHistory.table({})];case 1:return e=t.sent(),this.openVPage(W,{tasks:e}),[2]}})})},i.showCustomerHistory=function(e){return a.a(i,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.qeurySearchCustomerHistory.table({customerid:e})];case 1:return t=n.sent(),this.openVPage(K,{tasks:t}),[2]}})})},i.showTaskDetailEdit=function(e){return a.a(i,void 0,void 0,function(){var t;return a.d(this,function(n){return void 0!==(t=this.getCTaskType(e.biz.obj.name))&&t.showDetailEdit(e),[2]})})},i.showDetailFromId=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.getCTaskType(e.biz.obj.name).showDetailFromId(e.id),[2]})})},i.showTaskComplet=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.getCTaskType(e.biz.obj.name).showComplet(e),[2]})})},i.showTaskExtension=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.openVPage(f,e),[2]})})},i.showTaskInvalid=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.openVPage(U,e),[2]})})},i.onInvalidTask=function(e,t,n){return a.a(i,void 0,void 0,function(){var n;return a.d(this,function(r){switch(r.label){case 0:return n={taskid:e.id,resulttype:"Inval",result:t},[4,this.completionTaskAction.submit(n)];case 1:return r.sent(),this.tasks.remove(e),[2]}})})},i.selectTaskType=function(){return a.a(i,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.cSelectType.start()];case 1:return e.sent(),[2]}})})},i.selectTaskBiz=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.cSalesTaskBiz.call(e)];case 1:return[2,t.sent()]}})})},i.selectCustomer=function(){return a.a(i,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.cApp.cCustomer.call()];case 1:return[2,e.sent()]}})})},i.createTask=function(e,t){return a.a(i,void 0,void 0,function(){var n,r,i,o,s,c,l,u,d,m,p;return a.d(this,function(a){switch(a.label){case 0:return n=e.description,r=e.priorty,i=e.deadline,o=t.customer,s=t.type,c=t.biz,l=o.id,u=s.id,d=c.id,m={id:void 0,description:n,customer:l,type:u,biz:d,sourceID:"",sourceType:"",sourceNo:"",priorty:r=r?1:0,deadline:i},[4,this.addTaskAction.submit(m)];case 1:return p=a.sent(),m.id=p.id,[4,this.searchByKey(e)];case 2:return a.sent(),[2]}})})},i.showCustomerDetail=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.cApp.cCustomer.showCustomerDetail(e),[2]})})},i.render=Object(u.a)(function(){return i.renderView(d)}),i.tab=function(){return r.createElement(i.render,null)},i.cApp=t,i.cSelectType=new V(i,void 0),i.cSalesTaskBiz=new M(i,void 0);var o=i.cApp,s=o.cUqSalesTask,c=o.cUqCustomer;return i.taskTuid=s.tuid("task"),i.tuidCustomer=c.tuid("customer"),i.taskTypeTuid=s.tuid("tasktype"),i.taskBook=s.book("taskbook"),i.completionTaskAction=s.action("CompletionTask"),i.extensionTaskAction=s.action("ExtensionTask"),i.addTaskAction=s.action("AddTask"),i.qeurySearchTask=s.query("searchtask"),i.qeurySearchHistory=s.query("searchhistorytask"),i.qeurySearchEmployeeHistory=s.query("searchhistorytaskbyemployee"),i.qeurySearchCustomerHistory=s.query("searchhistorytaskbycustomer"),i.qeurySearchTaskCompletion=s.query("searchtaskcompletion"),i.taskTypes=function(e){var t={};for(var n in O){var r,i=O[n];"function"===typeof i?((r=t[n]=new i(void 0)).cSalesTask=e,r.caption||(r.caption=n)):(r=t[n]=new j(i,void 0)).cSalesTask=e}return t}(i),i}return a.c(t,e),t.prototype.internalStart=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.searchByKey(e)];case 1:return t.sent(),[2]}})})},t.prototype.taskIcon=function(e){var t=this.taskTypes[e];return void 0===t?"phone"==e?r.createElement(o.d,{name:"fax",size:"lg",fixWidth:!0}):r.createElement(o.d,{name:"car",size:"lg",fixWidth:!0}):t.icon},t.prototype.getCTaskType=function(e){return this.taskTypes[e]},t.prototype.completionTask=function(e,t){return a.a(this,void 0,void 0,function(){var n;return a.d(this,function(r){switch(r.label){case 0:return n={taskid:e.id,resulttype:"compl",result:"\u5b8c\u7ed3",fields:t},[4,this.completionTaskAction.submit(n)];case 1:return r.sent(),this.tasks.remove(e),this.closePage(2),[2]}})})},t.prototype.extensionTask=function(e,t,n,r){return a.a(this,void 0,void 0,function(){var n;return a.d(this,function(i){switch(i.label){case 0:return n={taskid:e.id,result:t,remindDate:r},[4,this.extensionTaskAction.submit(n)];case 1:return i.sent(),this.tasks.postPone(r,e),[2]}})})},a.b([m.l],t.prototype,"tasks",void 0),t}(o.b)),R="\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/salestask",$="\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/customer",G="\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/product",X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.controller.selectCustomer(e)];case 1:return t.sent(),this.ceasePage(),[2]}})})},t.page=Object(u.a)(function(e){var n=t.controller.pageCustomer,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01");return r.createElement(o.j,{header:"\u9009\u62e9\u5ba2\u6237",headerClassName:"bg-primary"},r.createElement(o.m,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(o.h,{before:"",none:i,items:n,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.renderCustomer=function(e,t){var n=e.name;return r.createElement(o.g,{className:"px-3 py-2 ",left:r.createElement(o.d,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))},t}(o.p),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(u.a)(function(e){var n=t.controller.cApp.cSalesTask.showCustomerHistory,i=[{type:"component",name:"customer",component:r.createElement(o.g,{className:"cursor-pointer w-100 py-3",left:r.createElement("div",null," ",r.createElement("small",null,r.createElement(o.d,{name:"university",className:"text-info"}))," \xa0\u5317\u4eac\u5927\u5b66"),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right"}))})},{type:"component",name:"customer",component:r.createElement(o.g,{className:"cursor-pointer w-100 py-3",onClick:function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,n(e.id)];case 1:return[2,t.sent()]}})})},left:r.createElement("div",null," ",r.createElement("small",null,r.createElement(o.d,{name:"hand-o-right",className:"text-info"}))," \xa0\u6c9f\u901a\u8bb0\u5f55"),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right"}))})},{type:"string",name:"no",label:"\u7f16\u53f7",vAlign:"center"},{type:"string",name:"name",label:"\u59d3\u540d",vAlign:"stretch"},{type:"string",name:"gender",label:"\u6027\u522b",vAlign:"stretch"},{type:"string",name:"birthday",label:"\u751f\u65e5"},{type:"string",name:"birthday",label:"\u9886\u57df",vAlign:"center"},{type:"string",name:"birthday",label:"TOP\u5355\u4f4d",vAlign:"stretch"}];return r.createElement(o.j,{header:"\u5ba2\u6237\u8be6\u60c5"},r.createElement(o.l,{className:"my-2",rows:i,values:e,alignValue:"right"}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t}(o.p),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return a.a(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.controller.showCustomerDetail(e.id)];case 1:return t.sent(),[2]}})})},t.page=Object(u.a)(function(e){var n=t.controller.pageCustomer,i=(r.createElement("div",{className:"cursor-pointer"},r.createElement(o.d,{name:"plus"})),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01"));return r.createElement(o.j,{header:"\u5ba2\u6237",headerClassName:"bg-primary py-1 px-3"},r.createElement(o.m,{className:"px-1 w-100  mt-2 mr-2  ",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(o.h,{before:"",none:i,items:n,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t.prototype.renderCustomer=function(e,t){var n=e.name;return r.createElement(o.g,{className:"px-3 py-2 ",left:r.createElement(o.d,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))},t}(o.p),_=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchCustomerQuery=t,n}return a.c(t,e),t.prototype.load=function(e,t,n){return a.a(this,void 0,Promise,function(){return a.d(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchCustomerQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(o.k),ee=function(e){function t(t,n){var i=e.call(this,n)||this;i.searchByKey=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.pageCustomer=new _(this.querySearchCustomer),this.pageCustomer.first({key:e}),[2]})})},i.loadCustomerDetail=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,this.tuidCustomer.load(e)];case 1:return[2,t.sent()]}})})},i.showCustomerDetail=function(e){return a.a(i,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.loadCustomerDetail(e)];case 1:return t=n.sent(),this.openVPage(Y,t),[2]}})})},i.selectCustomer=function(e){return a.a(i,void 0,Promise,function(){return a.d(this,function(t){return this.task.customer=e,this.cApp.cSalesTask.getCTaskType(this.task.biz.name).showCreate(this.task),[2]})})},i.returnCustomer=function(e){return a.a(i,void 0,Promise,function(){return a.d(this,function(t){return this.returnCall(e),[2]})})},i.render=Object(u.a)(function(){return i.pageCustomer=null,i.renderView(Z)}),i.tab=function(){return r.createElement(i.render,null)},i.cApp=t;var o=i.cApp.cUqCustomer;return i.tuidCustomer=o.tuid("customer"),i.querySearchCustomer=o.query("searchcustomer"),i}return a.c(t,e),t.prototype.internalStart=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.pageCustomer=null,this.task=e,this.openVPage(X),[2]})})},a.b([m.l],t.prototype,"pageCustomer",void 0),t}(o.b),te="http://www.jkchemical.com/static/Structure/",ne="http://www.jkchemical.com/static/Structure/999.png";function re(e){var t=e.style,n=e.className,i=e.chemicalId;return r.createElement(o.f,{src:i&&te+i.substr(0,3)+"/"+i+".png",style:t,className:n,altImage:ne})}var ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.renderProduct=function(e,n){var i=e.brand,a=e.description,s=e.descriptionC,c=e.CAS,l=e.purity,u=e.molecularFomula,d=e.molecularWeight,m=e.origin,p=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,a)),r.createElement("div",null,s)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(re,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",c),t.productPropItem("\u7eaf\u5ea6",l),t.productPropItem("\u5206\u5b50\u5f0f",u),t.productPropItem("\u5206\u5b50\u91cf",d),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",m),Object(o.v)(i,t.renderBrand)))))},t.onScrollBottom=function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.controller.pageProduct.more()];case 1:return e.sent(),[2]}})})},t.page=Object(u.a)(function(e){var n=t.controller.pageProduct,i=(r.createElement("div",{className:"cursor-pointer "},r.createElement(o.d,{name:"plus"})),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1"));return r.createElement(o.j,{header:"\u4ea7\u54c1",onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary py-1 px-3"},r.createElement(o.m,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(o.h,{before:"",none:i,items:n,item:{render:t.renderProduct,onClick:null}}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(o.p),ae=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchProductQuery=t,n}return a.c(t,e),t.prototype.load=function(e,t,n){return a.a(this,void 0,Promise,function(){return a.d(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchProductQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(o.k),oe=function(e){function t(t,n){var i=e.call(this,n)||this;i.searchByKey=function(e){return a.a(i,void 0,void 0,function(){return a.d(this,function(t){return this.pageProduct=new ae(this.querySearchProduct),this.pageProduct.first({key:e,salesRegion:1}),[2]})})},i.render=Object(u.a)(function(){return i.pageProduct=null,i.renderView(ie)}),i.tab=function(){return r.createElement(i.render,null)},i.cApp=t;var o=i.cApp.cUqProduct;return i.querySearchProduct=o.query("searchProduct"),i}return a.c(t,e),t.prototype.internalStart=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openVPage(null,e),[2]})})},a.b([m.l],t.prototype,"pageProduct",void 0),a.b([m.l],t.prototype,"customerlist",void 0),t}(o.b);function se(e,t,n,i){return r.createElement(o.g,{className:"cursor-pointer w-100 py-3 align-items-center",onClick:i,left:r.createElement(o.d,{name:e,className:"mr-3 "+t,fixWidth:!0,size:"lg"}),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right"}))},n)}var ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logout=function(){o.s.showLogout()},t.page=Object(u.a)(function(e){var n=t.controller.cApp.cSalesTask.showEmployeeHistory,i=[{type:"component",name:"customer",component:se("tag","text-info","\u5df2\u5b8c\u6210\u4efb\u52a1",function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return[2,e.sent()]}})})})},{type:"component",name:"customer",component:se("line-chart","text-danger","\u9500\u91cf",void 0)}],s=(r.createElement("div",{className:"mr-3"},r.createElement(o.d,{name:"bars"})),r.createElement("button",{type:"button",className:"btn btn-danger w-100",onClick:t.logout},"\u9000\u51fa"));return r.createElement(o.j,{header:"\u6211\u7684",footer:s,headerClassName:"bg-primary py-1 px-3"},r.createElement(o.l,{className:"my-2",rows:i,values:e,alignValue:"right"}))}),t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(o.p),le=function(e){function t(t,n){var i=e.call(this,n)||this;i.render=Object(u.a)(function(){return i.renderView(ce)}),i.tab=function(){return r.createElement(i.render,null)},i.cApp=t;var a=i.cApp,o=a.cUqSalesTask,s=a.cUqCustomer;return i.tuidCustomer=o.tuid("customer"),i.querySearchCustomer=s.query("searchcustomer"),i}return a.c(t,e),t.prototype.internalStart=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(t){return this.openVPage(ce,e),[2]})})},t}(o.b),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.internalStart=function(t){return a.a(this,void 0,void 0,function(){return a.d(this,function(n){switch(n.label){case 0:return this.cUqSalesTask=this.getCUq(R),this.cUqCustomer=this.getCUq($),this.cUqProduct=this.getCUq(G),this.cCustomer=new ee(this,void 0),this.cProduct=new oe(this,void 0),this.cSalesTask=new J(this,this.res),this.cMe=new le(this,void 0),this.cSalesTask.start(),[4,e.prototype.internalStart.call(this,t)];case 1:return n.sent(),[2]}})})},t}(o.a),de=function(e){return!0===e?"text-primary":"text-muted"},me={appName:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/salestask",CApp:ue,main:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e){var n=t.controller,i=n.cSalesTask,a=n.cCustomer,s=n.cProduct,c=n.cMe,l=[{name:"home",label:"\u4efb\u52a1",content:i.tab,icon:"home",notify:void 0},{name:"member",label:"\u5ba2\u6237",content:a.tab,icon:"vcard"},{name:"member",label:"\u4ea7\u54c1",content:s.tab,icon:"flask"},{name:"member",label:"\u6211",content:c.tab,icon:"user"}].map(function(e){var t=e.name,n=e.label,r=e.icon;return{name:t,caption:function(e){return Object(o.n)(n,r,de(e))},content:e.content,notify:e.notify}});return r.createElement(o.j,{header:!1},r.createElement(o.o,{tabs:l}))},t}return a.c(t,e),t.prototype.open=function(e){return a.a(this,void 0,void 0,function(){return a.d(this,function(e){return this.openPage(this.render),[2]})})},t}(o.p),uqs:{"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/salestask":s}},pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLogined=function(){return a.a(t,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,Object(o.t)(me)];case 1:return e.sent(),[2]}})})},t}return a.c(t,e),t.prototype.render=function(){return r.createElement(o.i,{onLogined:this.onLogined})},t}(r.Component),he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(70),n(72);i.render(r.createElement(pe,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="./service-worker.js";he?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):fe(e)})}}()}},[[44,4,2]]]);
//# sourceMappingURL=main.4c6e6961.chunk.js.map